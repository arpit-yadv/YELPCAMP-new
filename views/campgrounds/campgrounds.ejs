<%- include('../partials/header') %> 
<%- include('../partials/nav') %>
<%- include('../partials/flash') %>


<div id='map' class="" style="color: black; width:100%; height:400px"></div>





<div class="container">
  <h1 class="text-center display-4 mt-3">Campgrounds</h1>

    <div class="row justify-content-around">
        <% campgrounds.forEach(campground=>{ %>
        <div class="col-sm-5 my-4 ">
          <div class="card">
          <%if(campground.images[0]){%>
             <img src="<%= campground.images[Math.floor(Math.random()*(campground.images.length))].profile %>" class='d-inline card-img-top' alt="">   
             <%}%>
            <div class="card-body text-black-50">
              <h5 class="card-title"><%= campground.title %></h5>
              
              <h6 class="btn btn-success"><%= campground.price %>/- INR</h6>
              <p class="card-text"><%= campground.description.substr(0,100) %></p>
              <a href="/campgrounds/<%= campground._id %>" class="btn btn-primary">More Details</a>
            </div>
          </div>
        </div>
        <% }) %>
        
      </div>
    
</div>

<script>
  const mapToken = '<%-process.env.MAPBOX_TOKEN %>';
  const campgrounds = {features:<%-JSON.stringify(campgrounds)%>};

</script>
<script src="/javascripts/clustermap.js"></script>

<%- include('../partials/footer') %>
